
Генерация по шаблонам
=====================

@@code-info 
    class=jandcode.jc.GspScript

В `jc` имеется возможность генерировать произвольные наборы файлов по шаблонам `gsp`.

Пример:

@@code file=_inc/gen_gsp/GenExample.groovy part=example1

Пример шаблона:

@@code file=_inc/gen_gsp/template1.gsp


Аргументы для генерации
-----------------------

Аргументы для генерации передаются в виде Map в методе `genеrate` и доступны
в момент генерации через свойство: `args` типа `IVariantMap`.

Эти аргументы существуют в процессе генерации в единственном экземпляре
и разделяются между вложенными шаблонами.


Вложенные шаблоны
-----------------

Допустим, что у Вас имеется шаблон, который содержит некоторый обощенный вариант
генерации. Такой шаблон можно использовать из основного так:

@@code file=_inc/gen_gsp/use-child-tml1.gsp

Это простейший способ использования вложенных шаблонов.

Кроме этого существует возможность объявить во вложенном шаблоне функции,
которые можно вызывать из родительского. Такие функции будут выводить
текст в текущий файл.

В таком случае шаблон с функциями используется как набор функций и не должен
использоватся самостоятельно.

Так определяются функции во вложенном шаблоне:

@@code file=_inc/gen_gsp/func-def1.gsp

Так они используются:

@@code file=_inc/gen_gsp/func-use1.gsp


Генерация нескольких файлов
---------------------------

При запуске генерации в методе `generate` мы указываем в какой файл генерировать.
Каталог с указанным файлом будет рассматриватся как базовый каталог генерации.
В процессе генерации можно изменять текущий файл, в который будет осуществляется
дальнейшая генерация.

Допустим мы запускаем генерацию так:

@@code file=_inc/gen_gsp/GenExample.groovy part=example_for_changeFile1

Тогда в шаблоне можно делать так:

@@code file=_inc/gen_gsp/change-file1.gsp

При смене файла методами `changeFile` и `pushFile` файл физически не создается
и не открывается, пока не было никакого вывода. Поэтому при запуске генерации
можно указать какой либо фиктивный файл (он нужен для определения базового каталога
генерации), а уже в теле шаблона указать смену файла на нужный.

Допустим для вышеуказанного вызова в шаблоне можно написать так:

@@code file=_inc/gen_gsp/change-file2.gsp


Ресурсы для генерации
---------------------

Скрипт `jandcode.jc.GspScript` является наследником от
`jandcode.jc.ProjectScript` и обладает всеми его свойствами.
Например, свойство `scriptDir` указывает на каталог, из которого был загружен
скрипт. Это позволяет хранить ресурсы рядом со скриптом и в процессе генерации
копировать их в каталог вывода.

Допустим, мы генерируем html-файл и ему нужны css, js, картинки.
Можно сделать так:

@@code file=_inc/gen_gsp/resource1.gsp





