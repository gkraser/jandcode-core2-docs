
Структура проекта
=================

Базовый проект-приложение создается командой:

```
jc create -t:app -o:mypak-myapp
```

Получаем каталог `mypak-myapp` с проектом:

@@tree-fs file=_gen/app1/mypak-myapp.cfx

В корне проекта:

* `project.jc` - файл проекта для утилиты `jc`. Это groovy-скрипт, который
  описывает проект и команды, которые доступны при выполнении `jc` в этом каталоге
* `.env` - переменные среды, доступные при запуске проекта. Его содержимое:
  
  @@code file=_gen/app1/mypak-myapp/.env
  
  где:
  * `jandcode.env.source=true` - указание того, что из этого каталога будет запускатся
    приложение, доступное в исходниках
  * `jandcode.env.dev=true` - указание того, что из этого каталога приложение
    будет запускаться в "режиме разработки", в котором включены некоторые
    возможности нужные при отладке
    
* `.jc-root` - файл-маркер, который определяет каталог, в котором он находится,
  как корневой каталог проекта. Нужен для утилиты `jc`
* `app.cfx` - конфигурация приложения в production-режиме
* `app-dev.cfx` - конфигурация приложения в dev-режиме
* `data` - каталог с различными данными проекта, можете пока игнорировать
* `mypak-myapp-main` - каталог с модулем приложения, в котором находятся
  исходники приложения. Этот каталог так же содержит `project.jc`,
  что делает возможным выполнение некоторых команд `jc` в его контексте
  
   
Можно собрать проект:

```
jc build
```
  
В корне проекта будет сгенерирован файл `app-run.bat` и проект будет скомпилирован.
`app-run.bat` запускает приложение, точнее main-метод из класса
`mypak.myapp.main.AppLauncher`.

Можно собрать продукт:

```
jc product
```       

В каталоге `_jc/product` будет доступна бинарная сборка проекта с запускным
файлом `app-run.bat`. Этот каталог является продуктом, который можно отдавать 
пользователям.

!!! note
    Формирование дистрибутива, незвисимой среды исполнения для приложения и 
    другие варианты подготовки бинарного продукта для конечного пользователя, 
    делегируется Вам. Работа базовой платформы заканчивается на формировании
    каталога `_jc/product` с собранным и запускаемым приложением.
    

Для открытия проекта в Intellij Idea запустите формирование проекта idea:

```
jc gen-idea
```

Можно открывать файл `mypak-myapp-(project).ipr` в idea.

!!! note
    Команду `jc gen-idea` нужно выполнять каждый раз, когда меняется структура
    проекта: добавляются/удаляются модули проекта или зависимости проекта.
    На практике можно руководствоваться правилом: изменили project.jc (любой в 
    рамках проекта) - запустите `jc gen-idea` 


Команда подготовки проекта к использованию:

```
jc prepare
```

Эта команда проводит некоторую работу в каталоге проекта, обеспечивая 
ему правильную среду. Например создает `app-run.bat`, генерирует системные вспомогательные
файлы в каталоге `_jc`. Эта команда автоматически выполняется
перед выполнением `jc build`, `jc gen-idea`, `jc product`. Однако
ее можно выполнять и самостоятельно.

После выполнения команды `jc prepare` в каталоге проекта появляются дополнительные
каталоги и файлы:

* `temp` - каталог для всех временных файлов для утилиты `jc`, в том числе и для
  сборки проекта
* `_jc` - каталог с мета-информаций проекта. Формируется и обслуживается
  утилитой `_jc`. Можно рассматривать как некий кеш с информацией о проекте.
  
    
     