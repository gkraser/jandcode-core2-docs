
Тестирование
============

В этом разделе описаны вопросы тестирования в контексте модели и базы данных.
                                                                                 
Предок для тестов Dbm_Test
--------------------------

Классы unittest-ов должны быть унаследованы от класса
`jandcode.core.dbm.test.Dbm_Test`.

В тестовых методах доступны определенные инструменты, пример:

@@code file=Dbm_Test_Example.groovy
                                    
Без дополнительной настройки, в тестах будет использоватся модель `default`.
Можно настроить конкретную модель дл использования в тестах.
Для этого в файле `test.cfx` необходимо указать необходимую модель:

@@code file=test-model-name.cfx

Автосоздание базы данных для тестов
-----------------------------------

Система тестирования может создавать базу данных в момент первого обращения к ней.
Настройка:

@@code file=test-db-create.cfx

Свойства:

* `create-db` - если значение `true` и база не существует, то пустая база данных 
  будет создана автоматически, при первом обращении к ней
* `create-db-struct` - если значение `true`, то в базе данных будет выполнен скрипт, 
  который создаст структуру базы данных по текущему состоянию модели.  
                                                                      
Если параметры `create-db` и `create-db-struct` равны `true`, и база данных существует
и в ней какая-то структура, например от последнего выполнения тестов, то выполняется
сравнение теукщей структуры в модели и структуры в базе данных. Если они отличаются,
база данных удаляется и создается заново, с актуальной структурой.




