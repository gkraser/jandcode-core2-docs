Валидация данных
================

Введение
--------

Валидатор - это класс, реализующий интерфейс `jandcode.core.dbm.validate.Validator`.

Нужно реализовать метод `validate`, который получает в качестве параметра
контекст валидации `jandcode.core.dbm.validate.ValidatorContext`.
                       
Все валидаторы работают в контексте экземпляра `jandcode.core.dbm.mdb.Mdb`.


Регистрация валидатора
----------------------

@@code file=validator1.cfx part=validator1

Валидаторы регистрируются на уровне модели.

Для валидатора указывается `class`, реализующий интерфейс 
`jandcode.core.dbm.validate.Validator`. Все остальные атрибуты используются как
атрибуты контекста при выполнении валидатора.


Валидаторы для домена и поля
----------------------------

@@code file=validator1.cfx part=domain1


Прямой вызов валидатора
-----------------------
                          
Пример:

```groovy
mdb.validate(rec, "minmax", [field: "f1", min: 2, max: 20, title: "Поле f1"])
```

Здесь для объекта-записи `rec` вызывается валидатор с именем `minmax` и атрибутам,
среди которых явно указывается поле `f1`, которое нужно проверять.

Валидация конкретного поля
--------------------------

Пример:

```groovy
mdb.validateField(rec, "f1")
```

Здесь для объекта-записи `rec` вызывается валидатор с именем `field`.
Этот валидатор запускает все зарегистрированные для поля валидаторы.
                      
Условие: запись должна обладать информацией о домене. Если такой информации нет,
нужно явно указать домен в атрибутах:

```groovy
mdb.validateField(rec, "f1", [domain:'MyDomain1'])
```

Валидация записи
----------------

Пример:

```groovy
mdb.validateRecord(rec)
```

Здесь для объекта-записи `rec` вызывается валидатор с именем `record`.
Этот валидатор запускает для каждого поля валидатор `field`, а затем 
все зарегистрированные валидаторы для записи в целом.

Условие: запись должна обладать информацией о домене. Если такой информации нет,
нужно явно указать домен в атрибутах:

```groovy
mdb.validateRecord(rec, [domain:'MyDomain1'])
```
                        
