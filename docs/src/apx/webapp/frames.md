
Фреймы
======

Введение
--------

Приложение `apx` не основывается на клиенском роутинге, как многие.
Нет, как таковой, роутинг присутствует, но не является основным и обязательным
механизмом взимодействия с различными частями приложения.

Вместо клиентского роутинга используются *"фреймы"*.

Представим себе такое стандартное расположение основных элементов страницы:

<div style="display:inline-flex;flex-direction:column;padding:5px;margin:5px;border:1px solid gray">
    <div style="padding:5px;margin:5px;border:1px solid gray">header</div>
    <div style="display:inline-flex;flex-direction:row">
        <div style="padding:5px;margin:5px;border:1px solid gray">menu</div>
        <div style="padding:5px;margin:5px;border:1px solid gray;width:100px;height:100px">main</div>
    </div>
</div>       

В областях "header" и "menu" - управляющие элементы.
В области "main" - контент, который меняется, в зависимости от того,
что выбрано в "header" или "main", например щелчек по какой-то кнопке.

Фрейм как раз и предназначен для того, что бы отображать информацию в "main".

А теперь представим себе диалог. Такую панель, которая содержит что-то,
имеет кнопки "ок", "отмена". При показе может быть модальным. И т.д.

Фрейм предназначен еще и для того, что бы отображать информацию в диалогах.


Фрейм - это vue-компонент
------------------------- 

Фрейм - это vue-компонент, который __должен__ быть унаследован от `apx.JcFrame`.

Пример простейшего фрейма:

@@code file=samples/docapx1/js/frames/EmptyPage.vue


Декораторы фрейма
-----------------

Фрейм должен отрисовывать себя сам полностью. Ему предоставляется некоторая область
экрана (в примере выше это "main") и он ею полностью отрисовывает, включая все оформление,
например заголовки.

Если фрейм используется как диалог, то он должен отрисовать диалог полностью,
включая все кнопки диалога, его заголовок и т.д.

Естественно повторять оформление от фрейма к фрейму мало кому хочется.
Поэтому для фрейма используются декораторы.

Декоратор фрейма - это vue-компонент, который используется в качестве корневого
компонента в шаблоне фрейма. 
         
Пример фрейма с декоратором:

@@code file=samples/docapx1/js/frames/SimplePage.vue

Откуда взялся компонент `Page`? Из предка.
Если посмотреть исходный код `apx.JcFrame`, то можно увидеть регистрацию
компонентов для фрейма. Примерно это:

```js
import Page from './JcDecorFramePage.vue'
import Dialog from './JcDecorFrameDialog.vue'
                    
export default {
    components: {
        Page: Page,
        Dialog: Dialog,
    }           
    //......
}
```   

По умолчанию для фрейма зарегистрированы следующие декораторы:

* `Page` - для фреймов-страниц в "main". 
  Компонент-декоратор: `apx.components.JcDecorFramePage`
* `Dialog` - для фреймов-диалогов. 
  Компонент-декоратор: `apx.components.JcDecorFrameDialog`
  

Собственные декораторы
----------------------

Никто не мешает Вам разработать собственные декотораторы и использовать их.
В качестве стартовых примеров можно взять существующие декортаторы.

Правила их написания просты:

* нужно унаследовать компонент от `apx.JcDecorFrame`
* у вас есть ссылка на оформляемый фрейм в свойстве `own`. Его свойства можно использовать
  при оформлении. Например - заголовок фрейма.
  
Декоратор можно просто подключить (как и любой другой компонент) в свойство `components` 
фрейма и использовать.
  
Кроме того, можно ваши декораторы зарегистрировать глобально для всех фреймов:

```js
apx.frame.componentHolder.set('frame.PageMyDecor', MyDecorFrame)
```

Теперь у любого фрейма будет зарегистрован компонент `PageMyDecor`,
который можно использовать как декоратор.

 