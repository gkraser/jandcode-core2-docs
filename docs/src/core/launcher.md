
Launcher
========

@@code-info
    class=jandcode.core.launcher.BaseLauncherCmd
    class=jandcode.core.launcher.Launcher
    class=jandcode.core.launcher.LauncherCmd
    lib=jandcode-core-launcher

При генерации проекта-приложения в проекте создается файл `app-run.bat`,
который и запускает приложение, сконфигурированное в `app.cfx`.
    
В качестве запускалки используется класс `jandcode.core.launcher.Launcher`,
содержащий метод `main`.

Запуск основан на предоставлении приложением набора команд,
которые можно запустить через единую точку входа.

Для просмотра списка команд запустите `app.run.bat` без параметров.

!!! note
    `app-run.bat` запускает приложение так, как если бы оно было обособленное,
    без `jc`. Соответсвенно перед запуском приложение нужно собрать
    командой `jc build` или хотя бы скомпилировать командой `jc compile`.
    При запуске из Idea этого естественно делат не нужно,
    Idea сама скомпиляет проект перед запуском.


Добавление команды
------------------

Для добавления команды достаточно реализовать ее, унаследовавшись от 
класса `jandcode.core.launcher.BaseLauncherCmd`.

@@code file=MyCmd1.java

Методы, доступные в команде описаны в интерфейсе `jandcode.core.launcher.LauncherCmd`.

Теперь регистрируем команду:

@@code file=MyCmd1.cfx

После этого в приложении при запуске `app-run.bat` появляется новая команда
`my-cmd1`.

Конфигурация запуска в Idea
---------------------------

Приложение можно запускать из Idea с различными аргументами.
По умолчанию добавляется конфигурация `app-run`, которая запускает приложение
без параметров. При необходимости ее просто можно скопировать и добавить нужные параметры.

Если нужно, что бы конфигурация запуска генерировалась при генерации проекта Idea,
то это так же возможно настроить в `project.jc` корневого проекта:
 
@@code file=AddRunConfig1.groovy part=onInclude 
 
Запуск в продукте
-----------------

При формировании дистрибутива продукта в него включается версия `app-run.bat`,
которая запускает приложение.

Конфигурация module.cfx
-----------------------

### launcher/cmd

Описание команды.

Формат:

@@code file=cfx-launcher-cmd.xml
    
* `name` - имя команды
* `class` - класс команды, должен быть унаследован от `jandcode.core.launcher.BaseLauncherCmd`
* `enabled` - разрешена ли команда. При значении `false` команда игнорируется.
  По умолчанию - `true`. Используется для того, что бы исключить не нужные команды
  из приложения, которые поставляются некоторыми модулями
* `cmdname` - установка для команды другого имени. Если не указано, то имя команды
  принимается из `name`
  
